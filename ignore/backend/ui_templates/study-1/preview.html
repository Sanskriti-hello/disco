
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>STUDY TEMPLATE PREVIEW</title>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind (CDN, dev only) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
  <div id="root"></div>

  <script type="text/babel" data-presets="react,typescript">
    console.log("‚úÖ Babel script started");

    // ---------- TEMPLATE CODE ----------
    /* =========================================================
   SINGLE FILE STUDY TEMPLATE (DEV PREVIEW SAFE)
   No imports. No exports. Babel-standalone compatible.
   ========================================================= */

console.log("üìò StudyTemplate loaded");

function Summary({ text }) {
  return (
    <div className="bg-white rounded-xl shadow p-6">
      <h2 className="text-lg font-semibold mb-3">üìù Summary</h2>
      <p className="text-gray-700 leading-relaxed whitespace-pre-line">
        {text}
      </p>
    </div>
  );
}

function Flashcards({ cards }) {
  const [flipped, setFlipped] = React.useState(null);

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <h2 className="text-lg font-semibold mb-4">üß† Flashcards</h2>

      <div className="grid gap-4 md:grid-cols-2">
        {cards.map((card, idx) => (
          <div
            key={idx}
            onClick={() => setFlipped(flipped === idx ? null : idx)}
            className="cursor-pointer border rounded-lg p-4 hover:shadow transition"
          >
            <p className="text-sm text-gray-500 mb-1">
              {flipped === idx ? "Answer" : "Question"}
            </p>
            <p className="font-medium">
              {flipped === idx ? card.answer : card.question}
            </p>
          </div>
        ))}
      </div>

      <p className="text-xs text-gray-400 mt-4">
        Click a card to flip
      </p>
    </div>
  );
}

function Quiz({ questions }) {
  const [selected, setSelected] = React.useState({});

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <h2 className="text-lg font-semibold mb-4">üéØ Quiz</h2>

      <div className="space-y-6">
        {questions.map((q, idx) => (
          <div key={idx}>
            <p className="font-medium mb-2">
              {idx + 1}. {q.question}
            </p>

            <div className="space-y-2">
              {Object.entries(q.options).map(([key, value]) => {
                const isSelected = selected[idx] === key;
                const isCorrect = key === q.answer;

                return (
                  <button
                    key={key}
                    onClick={() =>
                      setSelected({ ...selected, [idx]: key })
                    }
                    className={`w-full text-left px-4 py-2 rounded border
                      ${isSelected ? "border-blue-500 bg-blue-50" : "border-gray-200"}
                      ${isSelected && isCorrect ? "bg-green-100 border-green-500" : ""}
                      ${isSelected && !isCorrect ? "bg-red-100 border-red-500" : ""}
                    `}
                  >
                    <span className="font-semibold mr-2">{key}.</span>
                    {value}
                  </button>
                );
              })}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

function StudyTemplate(props) {
  console.log("üìó Rendering StudyTemplate with props:", props);

  return (
    <div className="max-w-4xl mx-auto p-6 space-y-8">

      <div className="border-b pb-4">
        <h1 className="text-2xl font-bold">üìö Study Assistant</h1>
        <p className="text-sm text-gray-500">
          Smart summaries, flashcards, and quizzes
        </p>
      </div>

      {props.summary && <Summary text={props.summary} />}

      {props.flashcards && props.flashcards.length > 0 && (
        <Flashcards cards={props.flashcards} />
      )}

      {props.quiz && props.quiz.length > 0 && (
        <Quiz questions={props.quiz} />
      )}

      {!props.summary && !props.flashcards && !props.quiz && (
        <div className="text-center text-gray-400 py-20">
          No study material generated yet.
        </div>
      )}
    </div>
  );
}

    // ---------- END TEMPLATE CODE ----------

    const props = {
  "summary": "Transformers use self-attention.",
  "flashcards": [
    {
      "question": "What is attention?",
      "answer": "Weighted focus on tokens"
    }
  ],
  "quiz": [
    {
      "question": "Which model uses self-attention?",
      "options": {
        "A": "CNN",
        "B": "RNN",
        "C": "Transformer",
        "D": "SVM"
      },
      "answer": "C"
    }
  ]
};
    console.log("üì• Props:", props);

    const rootEl = document.getElementById("root");
    console.log("üì¶ Root element:", rootEl);

    const root = ReactDOM.createRoot(rootEl);
    console.log("üöÄ Rendering StudyTemplate");

    root.render(
      React.createElement(StudyTemplate, props)
    );
  </script>
</body>
</html>
